{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\saira\\\\OneDrive\\\\Desktop\\\\dashboard\\\\frontend\\\\src\\\\components\\\\IoTStatusIndicator.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StatusContainer = styled.div`\n  display: flex;\n  align-items: center;\n  gap: ${props => props.theme.spacing.xs};\n  padding: ${props => props.theme.spacing.xs} ${props => props.theme.spacing.sm};\n  border-radius: ${props => props.theme.borderRadius.full};\n  background: ${props => getStatusBg(props.status, props.theme)};\n  border: 1px solid ${props => getStatusColor(props.status, props.theme)};\n`;\n_c = StatusContainer;\nconst StatusDot = styled.div`\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: ${props => getStatusColor(props.status, props.theme)};\n  animation: ${props => props.status === 'online' ? 'pulse 2s infinite' : 'none'};\n\n  @keyframes pulse {\n    0% { opacity: 1; }\n    50% { opacity: 0.6; }\n    100% { opacity: 1; }\n  }\n`;\n_c2 = StatusDot;\nconst StatusText = styled.span`\n  font-size: ${props => props.theme.fontSizes.xs};\n  font-weight: ${props => props.theme.fontWeights.medium};\n  color: ${props => getStatusColor(props.status, props.theme)};\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n`;\n_c3 = StatusText;\nconst LastSeen = styled.div`\n  font-size: ${props => props.theme.fontSizes.xs};\n  color: ${props => props.theme.colors.textMuted};\n  margin-top: ${props => props.theme.spacing.xs};\n`;\n_c4 = LastSeen;\nfunction getStatusColor(status, theme) {\n  switch (status) {\n    case 'online':\n      return theme.colors.success;\n    case 'offline':\n      return theme.colors.danger;\n    case 'warning':\n      return theme.colors.warning;\n    default:\n      return theme.colors.textMuted;\n  }\n}\nfunction getStatusBg(status, theme) {\n  switch (status) {\n    case 'online':\n      return `${theme.colors.success}15`;\n    case 'offline':\n      return `${theme.colors.danger}15`;\n    case 'warning':\n      return `${theme.colors.warning}15`;\n    default:\n      return `${theme.colors.textMuted}15`;\n  }\n}\nfunction getDeviceStatus(timestamp) {\n  if (!timestamp) return {\n    status: 'offline',\n    text: 'No data'\n  };\n  const now = Math.floor(Date.now() / 1000);\n  const timeDiff = now - timestamp;\n  if (timeDiff <= 300) {\n    // 5 minutes\n    return {\n      status: 'online',\n      text: 'Online'\n    };\n  } else if (timeDiff <= 900) {\n    // 15 minutes\n    return {\n      status: 'warning',\n      text: 'Delayed'\n    };\n  } else {\n    return {\n      status: 'offline',\n      text: 'Offline'\n    };\n  }\n}\nfunction formatLastSeen(timestamp) {\n  if (!timestamp) return 'Never';\n  const now = Date.now();\n  const lastSeen = new Date(timestamp * 1000);\n  const diffMs = now - lastSeen.getTime();\n  const diffMins = Math.floor(diffMs / (1000 * 60));\n  const diffHours = Math.floor(diffMins / 60);\n  if (diffMins < 1) return 'Just now';\n  if (diffMins < 60) return `${diffMins}m ago`;\n  if (diffHours < 24) return `${diffHours}h ago`;\n  return lastSeen.toLocaleDateString();\n}\nconst IoTStatusIndicator = ({\n  unitId,\n  timestamp,\n  showLastSeen = false,\n  compact = false\n}) => {\n  _s();\n  const [currentTime, setCurrentTime] = useState(Date.now());\n  const deviceStatus = getDeviceStatus(timestamp);\n\n  // Update current time every 30 seconds to refresh status\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentTime(Date.now());\n    }, 30000);\n    return () => clearInterval(interval);\n  }, []);\n  if (compact) {\n    return /*#__PURE__*/_jsxDEV(StatusDot, {\n      status: deviceStatus.status,\n      title: `${unitId}: ${deviceStatus.text}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(StatusContainer, {\n      status: deviceStatus.status,\n      children: [/*#__PURE__*/_jsxDEV(StatusDot, {\n        status: deviceStatus.status\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatusText, {\n        status: deviceStatus.status,\n        children: deviceStatus.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), showLastSeen && /*#__PURE__*/_jsxDEV(LastSeen, {\n      children: [\"Last seen: \", formatLastSeen(timestamp)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 5\n  }, this);\n};\n_s(IoTStatusIndicator, \"qXrFeWhM47zpXthiuDXNrX6dnlg=\");\n_c5 = IoTStatusIndicator;\nexport default IoTStatusIndicator;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"StatusContainer\");\n$RefreshReg$(_c2, \"StatusDot\");\n$RefreshReg$(_c3, \"StatusText\");\n$RefreshReg$(_c4, \"LastSeen\");\n$RefreshReg$(_c5, \"IoTStatusIndicator\");","map":{"version":3,"names":["React","useState","useEffect","styled","jsxDEV","_jsxDEV","StatusContainer","div","props","theme","spacing","xs","sm","borderRadius","full","getStatusBg","status","getStatusColor","_c","StatusDot","_c2","StatusText","span","fontSizes","fontWeights","medium","_c3","LastSeen","colors","textMuted","_c4","success","danger","warning","getDeviceStatus","timestamp","text","now","Math","floor","Date","timeDiff","formatLastSeen","lastSeen","diffMs","getTime","diffMins","diffHours","toLocaleDateString","IoTStatusIndicator","unitId","showLastSeen","compact","_s","currentTime","setCurrentTime","deviceStatus","interval","setInterval","clearInterval","title","fileName","_jsxFileName","lineNumber","columnNumber","children","_c5","$RefreshReg$"],"sources":["C:/Users/saira/OneDrive/Desktop/dashboard/frontend/src/components/IoTStatusIndicator.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\n\nconst StatusContainer = styled.div`\n  display: flex;\n  align-items: center;\n  gap: ${props => props.theme.spacing.xs};\n  padding: ${props => props.theme.spacing.xs} ${props => props.theme.spacing.sm};\n  border-radius: ${props => props.theme.borderRadius.full};\n  background: ${props => getStatusBg(props.status, props.theme)};\n  border: 1px solid ${props => getStatusColor(props.status, props.theme)};\n`;\n\nconst StatusDot = styled.div`\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: ${props => getStatusColor(props.status, props.theme)};\n  animation: ${props => props.status === 'online' ? 'pulse 2s infinite' : 'none'};\n\n  @keyframes pulse {\n    0% { opacity: 1; }\n    50% { opacity: 0.6; }\n    100% { opacity: 1; }\n  }\n`;\n\nconst StatusText = styled.span`\n  font-size: ${props => props.theme.fontSizes.xs};\n  font-weight: ${props => props.theme.fontWeights.medium};\n  color: ${props => getStatusColor(props.status, props.theme)};\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n`;\n\nconst LastSeen = styled.div`\n  font-size: ${props => props.theme.fontSizes.xs};\n  color: ${props => props.theme.colors.textMuted};\n  margin-top: ${props => props.theme.spacing.xs};\n`;\n\nfunction getStatusColor(status, theme) {\n  switch (status) {\n    case 'online':\n      return theme.colors.success;\n    case 'offline':\n      return theme.colors.danger;\n    case 'warning':\n      return theme.colors.warning;\n    default:\n      return theme.colors.textMuted;\n  }\n}\n\nfunction getStatusBg(status, theme) {\n  switch (status) {\n    case 'online':\n      return `${theme.colors.success}15`;\n    case 'offline':\n      return `${theme.colors.danger}15`;\n    case 'warning':\n      return `${theme.colors.warning}15`;\n    default:\n      return `${theme.colors.textMuted}15`;\n  }\n}\n\nfunction getDeviceStatus(timestamp) {\n  if (!timestamp) return { status: 'offline', text: 'No data' };\n\n  const now = Math.floor(Date.now() / 1000);\n  const timeDiff = now - timestamp;\n\n  if (timeDiff <= 300) { // 5 minutes\n    return { status: 'online', text: 'Online' };\n  } else if (timeDiff <= 900) { // 15 minutes\n    return { status: 'warning', text: 'Delayed' };\n  } else {\n    return { status: 'offline', text: 'Offline' };\n  }\n}\n\nfunction formatLastSeen(timestamp) {\n  if (!timestamp) return 'Never';\n\n  const now = Date.now();\n  const lastSeen = new Date(timestamp * 1000);\n  const diffMs = now - lastSeen.getTime();\n  const diffMins = Math.floor(diffMs / (1000 * 60));\n  const diffHours = Math.floor(diffMins / 60);\n\n  if (diffMins < 1) return 'Just now';\n  if (diffMins < 60) return `${diffMins}m ago`;\n  if (diffHours < 24) return `${diffHours}h ago`;\n\n  return lastSeen.toLocaleDateString();\n}\n\nconst IoTStatusIndicator = ({\n  unitId,\n  timestamp,\n  showLastSeen = false,\n  compact = false\n}) => {\n  const [currentTime, setCurrentTime] = useState(Date.now());\n  const deviceStatus = getDeviceStatus(timestamp);\n\n  // Update current time every 30 seconds to refresh status\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentTime(Date.now());\n    }, 30000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  if (compact) {\n    return (\n      <StatusDot status={deviceStatus.status} title={`${unitId}: ${deviceStatus.text}`} />\n    );\n  }\n\n  return (\n    <div>\n      <StatusContainer status={deviceStatus.status}>\n        <StatusDot status={deviceStatus.status} />\n        <StatusText status={deviceStatus.status}>\n          {deviceStatus.text}\n        </StatusText>\n      </StatusContainer>\n      {showLastSeen && (\n        <LastSeen>\n          Last seen: {formatLastSeen(timestamp)}\n        </LastSeen>\n      )}\n    </div>\n  );\n};\n\nexport default IoTStatusIndicator;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}