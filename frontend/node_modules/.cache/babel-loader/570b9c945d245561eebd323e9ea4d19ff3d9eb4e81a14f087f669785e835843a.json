{"ast":null,"code":"import _taggedTemplateLiteral from\"D:/neuralkissan/dashboard/dashboard/frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import React,{useState,useEffect}from'react';import styled from'styled-components';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StatusContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  gap: \",\";\\n  padding: \",\" \",\";\\n  border-radius: \",\";\\n  background: \",\";\\n  border: 1px solid \",\";\\n\"])),props=>props.theme.spacing.xs,props=>props.theme.spacing.xs,props=>props.theme.spacing.sm,props=>props.theme.borderRadius.full,props=>getStatusBg(props.status,props.theme),props=>getStatusColor(props.status,props.theme));const StatusDot=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 8px;\\n  height: 8px;\\n  border-radius: 50%;\\n  background: \",\";\\n  animation: \",\";\\n\\n  @keyframes pulse {\\n    0% { opacity: 1; }\\n    50% { opacity: 0.6; }\\n    100% { opacity: 1; }\\n  }\\n\"])),props=>getStatusColor(props.status,props.theme),props=>props.status==='online'?'pulse 2s infinite':'none');const StatusText=styled.span(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  font-size: \",\";\\n  font-weight: \",\";\\n  color: \",\";\\n  text-transform: uppercase;\\n  letter-spacing: 0.05em;\\n\"])),props=>props.theme.fontSizes.xs,props=>props.theme.fontWeights.medium,props=>getStatusColor(props.status,props.theme));const LastSeen=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  font-size: \",\";\\n  color: \",\";\\n  margin-top: \",\";\\n\"])),props=>props.theme.fontSizes.xs,props=>props.theme.colors.textMuted,props=>props.theme.spacing.xs);function getStatusColor(status,theme){switch(status){case'online':return theme.colors.success;case'offline':return theme.colors.danger;case'warning':return theme.colors.warning;default:return theme.colors.textMuted;}}function getStatusBg(status,theme){switch(status){case'online':return\"\".concat(theme.colors.success,\"15\");case'offline':return\"\".concat(theme.colors.danger,\"15\");case'warning':return\"\".concat(theme.colors.warning,\"15\");default:return\"\".concat(theme.colors.textMuted,\"15\");}}function getDeviceStatus(timestamp){if(!timestamp)return{status:'offline',text:'No data'};const now=Math.floor(Date.now()/1000);const timeDiff=now-timestamp;if(timeDiff<=300){// 5 minutes\nreturn{status:'online',text:'Online'};}else if(timeDiff<=900){// 15 minutes\nreturn{status:'warning',text:'Delayed'};}else{return{status:'offline',text:'Offline'};}}function formatLastSeen(timestamp){if(!timestamp)return'Never';const now=Date.now();const lastSeen=new Date(timestamp*1000);const diffMs=now-lastSeen.getTime();const diffMins=Math.floor(diffMs/(1000*60));const diffHours=Math.floor(diffMins/60);if(diffMins<1)return'Just now';if(diffMins<60)return\"\".concat(diffMins,\"m ago\");if(diffHours<24)return\"\".concat(diffHours,\"h ago\");return lastSeen.toLocaleDateString();}const IoTStatusIndicator=_ref=>{let{unitId,timestamp,showLastSeen=false,compact=false}=_ref;const[currentTime,setCurrentTime]=useState(Date.now());const deviceStatus=getDeviceStatus(timestamp);// Update current time every 30 seconds to refresh status\nuseEffect(()=>{const interval=setInterval(()=>{setCurrentTime(Date.now());},30000);return()=>clearInterval(interval);},[]);if(compact){return/*#__PURE__*/_jsx(StatusDot,{status:deviceStatus.status,title:\"\".concat(unitId,\": \").concat(deviceStatus.text)});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(StatusContainer,{status:deviceStatus.status,children:[/*#__PURE__*/_jsx(StatusDot,{status:deviceStatus.status}),/*#__PURE__*/_jsx(StatusText,{status:deviceStatus.status,children:deviceStatus.text})]}),showLastSeen&&/*#__PURE__*/_jsxs(LastSeen,{children:[\"Last seen: \",formatLastSeen(timestamp)]})]});};export default IoTStatusIndicator;","map":{"version":3,"names":["React","useState","useEffect","styled","jsx","_jsx","jsxs","_jsxs","StatusContainer","div","_templateObject","_taggedTemplateLiteral","props","theme","spacing","xs","sm","borderRadius","full","getStatusBg","status","getStatusColor","StatusDot","_templateObject2","StatusText","span","_templateObject3","fontSizes","fontWeights","medium","LastSeen","_templateObject4","colors","textMuted","success","danger","warning","concat","getDeviceStatus","timestamp","text","now","Math","floor","Date","timeDiff","formatLastSeen","lastSeen","diffMs","getTime","diffMins","diffHours","toLocaleDateString","IoTStatusIndicator","_ref","unitId","showLastSeen","compact","currentTime","setCurrentTime","deviceStatus","interval","setInterval","clearInterval","title","children"],"sources":["D:/neuralkissan/dashboard/dashboard/frontend/src/components/IoTStatusIndicator.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\n\nconst StatusContainer = styled.div`\n  display: flex;\n  align-items: center;\n  gap: ${props => props.theme.spacing.xs};\n  padding: ${props => props.theme.spacing.xs} ${props => props.theme.spacing.sm};\n  border-radius: ${props => props.theme.borderRadius.full};\n  background: ${props => getStatusBg(props.status, props.theme)};\n  border: 1px solid ${props => getStatusColor(props.status, props.theme)};\n`;\n\nconst StatusDot = styled.div`\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: ${props => getStatusColor(props.status, props.theme)};\n  animation: ${props => props.status === 'online' ? 'pulse 2s infinite' : 'none'};\n\n  @keyframes pulse {\n    0% { opacity: 1; }\n    50% { opacity: 0.6; }\n    100% { opacity: 1; }\n  }\n`;\n\nconst StatusText = styled.span`\n  font-size: ${props => props.theme.fontSizes.xs};\n  font-weight: ${props => props.theme.fontWeights.medium};\n  color: ${props => getStatusColor(props.status, props.theme)};\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n`;\n\nconst LastSeen = styled.div`\n  font-size: ${props => props.theme.fontSizes.xs};\n  color: ${props => props.theme.colors.textMuted};\n  margin-top: ${props => props.theme.spacing.xs};\n`;\n\nfunction getStatusColor(status, theme) {\n  switch (status) {\n    case 'online':\n      return theme.colors.success;\n    case 'offline':\n      return theme.colors.danger;\n    case 'warning':\n      return theme.colors.warning;\n    default:\n      return theme.colors.textMuted;\n  }\n}\n\nfunction getStatusBg(status, theme) {\n  switch (status) {\n    case 'online':\n      return `${theme.colors.success}15`;\n    case 'offline':\n      return `${theme.colors.danger}15`;\n    case 'warning':\n      return `${theme.colors.warning}15`;\n    default:\n      return `${theme.colors.textMuted}15`;\n  }\n}\n\nfunction getDeviceStatus(timestamp) {\n  if (!timestamp) return { status: 'offline', text: 'No data' };\n\n  const now = Math.floor(Date.now() / 1000);\n  const timeDiff = now - timestamp;\n\n  if (timeDiff <= 300) { // 5 minutes\n    return { status: 'online', text: 'Online' };\n  } else if (timeDiff <= 900) { // 15 minutes\n    return { status: 'warning', text: 'Delayed' };\n  } else {\n    return { status: 'offline', text: 'Offline' };\n  }\n}\n\nfunction formatLastSeen(timestamp) {\n  if (!timestamp) return 'Never';\n\n  const now = Date.now();\n  const lastSeen = new Date(timestamp * 1000);\n  const diffMs = now - lastSeen.getTime();\n  const diffMins = Math.floor(diffMs / (1000 * 60));\n  const diffHours = Math.floor(diffMins / 60);\n\n  if (diffMins < 1) return 'Just now';\n  if (diffMins < 60) return `${diffMins}m ago`;\n  if (diffHours < 24) return `${diffHours}h ago`;\n\n  return lastSeen.toLocaleDateString();\n}\n\nconst IoTStatusIndicator = ({\n  unitId,\n  timestamp,\n  showLastSeen = false,\n  compact = false\n}) => {\n  const [currentTime, setCurrentTime] = useState(Date.now());\n  const deviceStatus = getDeviceStatus(timestamp);\n\n  // Update current time every 30 seconds to refresh status\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCurrentTime(Date.now());\n    }, 30000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  if (compact) {\n    return (\n      <StatusDot status={deviceStatus.status} title={`${unitId}: ${deviceStatus.text}`} />\n    );\n  }\n\n  return (\n    <div>\n      <StatusContainer status={deviceStatus.status}>\n        <StatusDot status={deviceStatus.status} />\n        <StatusText status={deviceStatus.status}>\n          {deviceStatus.text}\n        </StatusText>\n      </StatusContainer>\n      {showLastSeen && (\n        <LastSeen>\n          Last seen: {formatLastSeen(timestamp)}\n        </LastSeen>\n      )}\n    </div>\n  );\n};\n\nexport default IoTStatusIndicator;"],"mappings":"yNAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvC,KAAM,CAAAC,eAAe,CAAGL,MAAM,CAACM,GAAG,CAAAC,eAAA,GAAAA,eAAA,CAAAC,sBAAA,2JAGzBC,KAAK,EAAIA,KAAK,CAACC,KAAK,CAACC,OAAO,CAACC,EAAE,CAC3BH,KAAK,EAAIA,KAAK,CAACC,KAAK,CAACC,OAAO,CAACC,EAAE,CAAIH,KAAK,EAAIA,KAAK,CAACC,KAAK,CAACC,OAAO,CAACE,EAAE,CAC5DJ,KAAK,EAAIA,KAAK,CAACC,KAAK,CAACI,YAAY,CAACC,IAAI,CACzCN,KAAK,EAAIO,WAAW,CAACP,KAAK,CAACQ,MAAM,CAAER,KAAK,CAACC,KAAK,CAAC,CACzCD,KAAK,EAAIS,cAAc,CAACT,KAAK,CAACQ,MAAM,CAAER,KAAK,CAACC,KAAK,CAAC,CACvE,CAED,KAAM,CAAAS,SAAS,CAAGnB,MAAM,CAACM,GAAG,CAAAc,gBAAA,GAAAA,gBAAA,CAAAZ,sBAAA,iNAIZC,KAAK,EAAIS,cAAc,CAACT,KAAK,CAACQ,MAAM,CAAER,KAAK,CAACC,KAAK,CAAC,CACnDD,KAAK,EAAIA,KAAK,CAACQ,MAAM,GAAK,QAAQ,CAAG,mBAAmB,CAAG,MAAM,CAO/E,CAED,KAAM,CAAAI,UAAU,CAAGrB,MAAM,CAACsB,IAAI,CAAAC,gBAAA,GAAAA,gBAAA,CAAAf,sBAAA,0HACfC,KAAK,EAAIA,KAAK,CAACC,KAAK,CAACc,SAAS,CAACZ,EAAE,CAC/BH,KAAK,EAAIA,KAAK,CAACC,KAAK,CAACe,WAAW,CAACC,MAAM,CAC7CjB,KAAK,EAAIS,cAAc,CAACT,KAAK,CAACQ,MAAM,CAAER,KAAK,CAACC,KAAK,CAAC,CAG5D,CAED,KAAM,CAAAiB,QAAQ,CAAG3B,MAAM,CAACM,GAAG,CAAAsB,gBAAA,GAAAA,gBAAA,CAAApB,sBAAA,gEACZC,KAAK,EAAIA,KAAK,CAACC,KAAK,CAACc,SAAS,CAACZ,EAAE,CACrCH,KAAK,EAAIA,KAAK,CAACC,KAAK,CAACmB,MAAM,CAACC,SAAS,CAChCrB,KAAK,EAAIA,KAAK,CAACC,KAAK,CAACC,OAAO,CAACC,EAAE,CAC9C,CAED,QAAS,CAAAM,cAAcA,CAACD,MAAM,CAAEP,KAAK,CAAE,CACrC,OAAQO,MAAM,EACZ,IAAK,QAAQ,CACX,MAAO,CAAAP,KAAK,CAACmB,MAAM,CAACE,OAAO,CAC7B,IAAK,SAAS,CACZ,MAAO,CAAArB,KAAK,CAACmB,MAAM,CAACG,MAAM,CAC5B,IAAK,SAAS,CACZ,MAAO,CAAAtB,KAAK,CAACmB,MAAM,CAACI,OAAO,CAC7B,QACE,MAAO,CAAAvB,KAAK,CAACmB,MAAM,CAACC,SAAS,CACjC,CACF,CAEA,QAAS,CAAAd,WAAWA,CAACC,MAAM,CAAEP,KAAK,CAAE,CAClC,OAAQO,MAAM,EACZ,IAAK,QAAQ,CACX,SAAAiB,MAAA,CAAUxB,KAAK,CAACmB,MAAM,CAACE,OAAO,OAChC,IAAK,SAAS,CACZ,SAAAG,MAAA,CAAUxB,KAAK,CAACmB,MAAM,CAACG,MAAM,OAC/B,IAAK,SAAS,CACZ,SAAAE,MAAA,CAAUxB,KAAK,CAACmB,MAAM,CAACI,OAAO,OAChC,QACE,SAAAC,MAAA,CAAUxB,KAAK,CAACmB,MAAM,CAACC,SAAS,OACpC,CACF,CAEA,QAAS,CAAAK,eAAeA,CAACC,SAAS,CAAE,CAClC,GAAI,CAACA,SAAS,CAAE,MAAO,CAAEnB,MAAM,CAAE,SAAS,CAAEoB,IAAI,CAAE,SAAU,CAAC,CAE7D,KAAM,CAAAC,GAAG,CAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACH,GAAG,CAAC,CAAC,CAAG,IAAI,CAAC,CACzC,KAAM,CAAAI,QAAQ,CAAGJ,GAAG,CAAGF,SAAS,CAEhC,GAAIM,QAAQ,EAAI,GAAG,CAAE,CAAE;AACrB,MAAO,CAAEzB,MAAM,CAAE,QAAQ,CAAEoB,IAAI,CAAE,QAAS,CAAC,CAC7C,CAAC,IAAM,IAAIK,QAAQ,EAAI,GAAG,CAAE,CAAE;AAC5B,MAAO,CAAEzB,MAAM,CAAE,SAAS,CAAEoB,IAAI,CAAE,SAAU,CAAC,CAC/C,CAAC,IAAM,CACL,MAAO,CAAEpB,MAAM,CAAE,SAAS,CAAEoB,IAAI,CAAE,SAAU,CAAC,CAC/C,CACF,CAEA,QAAS,CAAAM,cAAcA,CAACP,SAAS,CAAE,CACjC,GAAI,CAACA,SAAS,CAAE,MAAO,OAAO,CAE9B,KAAM,CAAAE,GAAG,CAAGG,IAAI,CAACH,GAAG,CAAC,CAAC,CACtB,KAAM,CAAAM,QAAQ,CAAG,GAAI,CAAAH,IAAI,CAACL,SAAS,CAAG,IAAI,CAAC,CAC3C,KAAM,CAAAS,MAAM,CAAGP,GAAG,CAAGM,QAAQ,CAACE,OAAO,CAAC,CAAC,CACvC,KAAM,CAAAC,QAAQ,CAAGR,IAAI,CAACC,KAAK,CAACK,MAAM,EAAI,IAAI,CAAG,EAAE,CAAC,CAAC,CACjD,KAAM,CAAAG,SAAS,CAAGT,IAAI,CAACC,KAAK,CAACO,QAAQ,CAAG,EAAE,CAAC,CAE3C,GAAIA,QAAQ,CAAG,CAAC,CAAE,MAAO,UAAU,CACnC,GAAIA,QAAQ,CAAG,EAAE,CAAE,SAAAb,MAAA,CAAUa,QAAQ,UACrC,GAAIC,SAAS,CAAG,EAAE,CAAE,SAAAd,MAAA,CAAUc,SAAS,UAEvC,MAAO,CAAAJ,QAAQ,CAACK,kBAAkB,CAAC,CAAC,CACtC,CAEA,KAAM,CAAAC,kBAAkB,CAAGC,IAAA,EAKrB,IALsB,CAC1BC,MAAM,CACNhB,SAAS,CACTiB,YAAY,CAAG,KAAK,CACpBC,OAAO,CAAG,KACZ,CAAC,CAAAH,IAAA,CACC,KAAM,CAACI,WAAW,CAAEC,cAAc,CAAC,CAAG1D,QAAQ,CAAC2C,IAAI,CAACH,GAAG,CAAC,CAAC,CAAC,CAC1D,KAAM,CAAAmB,YAAY,CAAGtB,eAAe,CAACC,SAAS,CAAC,CAE/C;AACArC,SAAS,CAAC,IAAM,CACd,KAAM,CAAA2D,QAAQ,CAAGC,WAAW,CAAC,IAAM,CACjCH,cAAc,CAACf,IAAI,CAACH,GAAG,CAAC,CAAC,CAAC,CAC5B,CAAC,CAAE,KAAK,CAAC,CAET,MAAO,IAAMsB,aAAa,CAACF,QAAQ,CAAC,CACtC,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIJ,OAAO,CAAE,CACX,mBACEpD,IAAA,CAACiB,SAAS,EAACF,MAAM,CAAEwC,YAAY,CAACxC,MAAO,CAAC4C,KAAK,IAAA3B,MAAA,CAAKkB,MAAM,OAAAlB,MAAA,CAAKuB,YAAY,CAACpB,IAAI,CAAG,CAAE,CAAC,CAExF,CAEA,mBACEjC,KAAA,QAAA0D,QAAA,eACE1D,KAAA,CAACC,eAAe,EAACY,MAAM,CAAEwC,YAAY,CAACxC,MAAO,CAAA6C,QAAA,eAC3C5D,IAAA,CAACiB,SAAS,EAACF,MAAM,CAAEwC,YAAY,CAACxC,MAAO,CAAE,CAAC,cAC1Cf,IAAA,CAACmB,UAAU,EAACJ,MAAM,CAAEwC,YAAY,CAACxC,MAAO,CAAA6C,QAAA,CACrCL,YAAY,CAACpB,IAAI,CACR,CAAC,EACE,CAAC,CACjBgB,YAAY,eACXjD,KAAA,CAACuB,QAAQ,EAAAmC,QAAA,EAAC,aACG,CAACnB,cAAc,CAACP,SAAS,CAAC,EAC7B,CACX,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAc,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}