{"ast":null,"code":"import axios from'axios';const API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:5000';// Create axios instance\nconst api=axios.create({baseURL:API_BASE_URL,headers:{'Content-Type':'application/json'}});// Request interceptor\napi.interceptors.request.use(config=>{var _config$method;console.log(\"API Request: \".concat((_config$method=config.method)===null||_config$method===void 0?void 0:_config$method.toUpperCase(),\" \").concat(config.url));return config;},error=>{return Promise.reject(error);});// Response interceptor\napi.interceptors.response.use(response=>{console.log(\"API Response: \".concat(response.status,\" \").concat(response.config.url));return response;},error=>{var _error$response,_error$config,_error$response2;console.error(\"API Error: \".concat((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status,\" \").concat((_error$config=error.config)===null||_error$config===void 0?void 0:_error$config.url),(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data);return Promise.reject(error);});// Hydro Units API\nexport const hydroUnitsAPI={// Get sensor data for a unit\ngetSensors:unitId=>api.get(\"/units/\".concat(unitId,\"/sensors\")),// Get relay states for a unit\ngetRelays:unitId=>api.get(\"/units/\".concat(unitId,\"/relays\")),// Update relay state\nupdateRelay:(unitId,relayData)=>api.post(\"/units/\".concat(unitId,\"/relay\"),relayData),// Get schedule for a unit\ngetSchedule:unitId=>api.get(\"/units/\".concat(unitId,\"/schedule\")),// Update schedule for a unit\nupdateSchedule:(unitId,scheduleData)=>api.post(\"/units/\".concat(unitId,\"/schedule\"),scheduleData)};// Room Monitoring API\nexport const roomAPI={// Get front room sensors\ngetFrontSensors:()=>api.get('/room/front/sensors'),// Get back room sensors\ngetBackSensors:()=>api.get('/room/back/sensors'),// Get AC schedule\ngetACSchedule:()=>api.get('/room/back/ac_schedule'),// Update AC schedule\nupdateACSchedule:scheduleData=>api.post('/room/back/ac_schedule',scheduleData)};// Camera API\nexport const cameraAPI={// Get camera status for a unit\ngetCameras:unitId=>api.get(\"/cameras/\".concat(unitId)),// Get recent images from a specific camera\ngetCameraImages:function(cameraId){let limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;return api.get(\"/cameras/\".concat(cameraId,\"/images?limit=\").concat(limit));},// Upload camera image\nuploadImage:(cameraId,imageFile)=>{const formData=new FormData();formData.append('image',imageFile);return api.post(\"/cameras/\".concat(cameraId,\"/upload\"),formData,{headers:{'Content-Type':'multipart/form-data'}});},// Get latest images for a unit\ngetLatestImages:unitId=>api.get(\"/units/\".concat(unitId,\"/cameras/latest\"))};// Utility functions\nexport const apiUtils={// Handle API errors\nhandleError:function(error){var _error$response3,_error$response3$data;let defaultMessage=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'An error occurred';if((_error$response3=error.response)!==null&&_error$response3!==void 0&&(_error$response3$data=_error$response3.data)!==null&&_error$response3$data!==void 0&&_error$response3$data.message){return error.response.data.message;}if(error.message){return error.message;}return defaultMessage;},// Check if API is available\nhealthCheck:async()=>{try{await api.get('/health');return true;}catch(error){return false;}}};export default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","interceptors","request","use","config","_config$method","console","log","concat","method","toUpperCase","url","error","Promise","reject","response","status","_error$response","_error$config","_error$response2","data","hydroUnitsAPI","getSensors","unitId","get","getRelays","updateRelay","relayData","post","getSchedule","updateSchedule","scheduleData","roomAPI","getFrontSensors","getBackSensors","getACSchedule","updateACSchedule","cameraAPI","getCameras","getCameraImages","cameraId","limit","arguments","length","undefined","uploadImage","imageFile","formData","FormData","append","getLatestImages","apiUtils","handleError","_error$response3","_error$response3$data","defaultMessage","message","healthCheck"],"sources":["D:/neuralkissan/dashboard/dashboard/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor\napi.interceptors.request.use(\n  (config) => {\n    console.log(`API Request: ${config.method?.toUpperCase()} ${config.url}`);\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor\napi.interceptors.response.use(\n  (response) => {\n    console.log(`API Response: ${response.status} ${response.config.url}`);\n    return response;\n  },\n  (error) => {\n    console.error(`API Error: ${error.response?.status} ${error.config?.url}`, error.response?.data);\n    return Promise.reject(error);\n  }\n);\n\n// Hydro Units API\nexport const hydroUnitsAPI = {\n  // Get sensor data for a unit\n  getSensors: (unitId) => api.get(`/units/${unitId}/sensors`),\n\n  // Get relay states for a unit\n  getRelays: (unitId) => api.get(`/units/${unitId}/relays`),\n\n  // Update relay state\n  updateRelay: (unitId, relayData) => api.post(`/units/${unitId}/relay`, relayData),\n\n  // Get schedule for a unit\n  getSchedule: (unitId) => api.get(`/units/${unitId}/schedule`),\n\n  // Update schedule for a unit\n  updateSchedule: (unitId, scheduleData) => api.post(`/units/${unitId}/schedule`, scheduleData),\n};\n\n// Room Monitoring API\nexport const roomAPI = {\n  // Get front room sensors\n  getFrontSensors: () => api.get('/room/front/sensors'),\n\n  // Get back room sensors\n  getBackSensors: () => api.get('/room/back/sensors'),\n\n  // Get AC schedule\n  getACSchedule: () => api.get('/room/back/ac_schedule'),\n\n  // Update AC schedule\n  updateACSchedule: (scheduleData) => api.post('/room/back/ac_schedule', scheduleData),\n};\n\n// Camera API\nexport const cameraAPI = {\n  // Get camera status for a unit\n  getCameras: (unitId) => api.get(`/cameras/${unitId}`),\n\n  // Get recent images from a specific camera\n  getCameraImages: (cameraId, limit = 10) => api.get(`/cameras/${cameraId}/images?limit=${limit}`),\n\n  // Upload camera image\n  uploadImage: (cameraId, imageFile) => {\n    const formData = new FormData();\n    formData.append('image', imageFile);\n    return api.post(`/cameras/${cameraId}/upload`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    });\n  },\n\n  // Get latest images for a unit\n  getLatestImages: (unitId) => api.get(`/units/${unitId}/cameras/latest`),\n};\n\n// Utility functions\nexport const apiUtils = {\n  // Handle API errors\n  handleError: (error, defaultMessage = 'An error occurred') => {\n    if (error.response?.data?.message) {\n      return error.response.data.message;\n    }\n    if (error.message) {\n      return error.message;\n    }\n    return defaultMessage;\n  },\n\n  // Check if API is available\n  healthCheck: async () => {\n    try {\n      await api.get('/health');\n      return true;\n    } catch (error) {\n      return false;\n    }\n  },\n};\n\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}